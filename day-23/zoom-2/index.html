<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>zoom 2 - zoom image</title>
        <link rel="stylesheet" href="./style.css" />
    </head>
    <body>
        <div class="box">
            <img
                src="https://plus.unsplash.com/premium_photo-1677623022346-2175a0aaa2c3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTd8fGJpa2V8ZW58MHx8MHx8fDA%3D"
                alt="bike"
            />

            <div class="zoom"></div>
        </div>
        <script>
            const $ = document.querySelector.bind(document);

            const box = $(".box");
            const imgBike = $("img");
            const zoom = $(".zoom");

            let zoomSize = 2;
            const url = imgBike.src;
            zoom.style.backgroundImage = `url(${url})`;

            box.addEventListener("mousemove", function (e) {
                zoom.style.left = e.offsetX - zoom.offsetWidth / 2 + "px";
                zoom.style.top = e.offsetY - zoom.offsetHeight / 2 + "px";
                zoom.style.display = "block";

                const x = e.clientX - this.offsetLeft;
                const y = e.clientY - this.offsetTop;
                const imgWidth = imgBike.offsetWidth;
                const imgHeight = imgBike.offsetHeight;
                const xPercent = (x / imgWidth) * 100;
                const yPercent = (y / imgHeight) * 100;
                zoom.style.backgroundPosition = `${xPercent}% ${yPercent}%`;
                zoom.style.backgroundSize = `${imgWidth * zoomSize}px ${imgHeight * zoomSize}px`;
            });
            box.addEventListener("mouseleave", function () {
                zoom.style.display = "none";
            });
        </script>
    </body>
</html>
